<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta nom_vehicule="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarifs - ACF2L</title>
    <link rel="stylesheet" href="../CSS/Tarifs.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- Barre de navigation -->
<nav class="navbar navbar-expand-lg bg-white">
    <div class="container">
        <a class="navbar-brand" href="#">
            <img src="../IMG/logo.png" alt="Logo" height="100px">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link rounded-3 p-3 mx-3" href="../HTML/Locaux.html">Locaux</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active rounded-3 p-3 mx-3" href="../HTML/Tarifs.html">Tarifs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link rounded-3 p-3 mx-3" href="../HTML/Profil.html">Profil</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link rounded-3 p-3 mx-3" href="../HTML/A_propos.html">À propos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link rounded-3 p-3" href="../HTML/Se_connecter.html">Se connecter</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Titre principal -->
<div class="container my-5">
    <h1 class="border-bottom pb-3 mb-4">Tarifs</h1>
    <h4>Baptêmes de l'air/initiation</h4>
</div>

<!-- Section principale avec les cartes et le résumé de commande -->
<div class="container">
    <div class="row">
        <!-- Colonne gauche avec les cartes de baptêmes -->
        <div class="col-lg-8">
            <!-- La carte pour le penduaire -->
            <div class="card d-flex flex-row align-items-center mb-4">
                <div class="col-1 p-0 "></div>
                <div class="col-3 pt-3">
                    <img src="../IMG/pendulaire.png" alt="ULM Pendulaire" id="ULM_Pendulaire" class="card img">
                </div>
                <div class="col-1 p-0 "></div>
                <div class="col-7 pt-3">
                    <h5 class="card-title">Baptême de l'air ULM Pendulaire</h5>
                    <p class="text-muted">190,00€</p>
                    <p>Prestation : Accompagné par un instructeur diplômé, vous découvrez le vol en ULM.</p>
                    <p>Survol de la région : découvrez les paysages.</p>
                    <button class="ajouter_au_panier" nom_du_vehicule="ULM Pendulaire" prix="190">Ajouter au panier</button>
                    <button class="retirer_du_panier" nom_du_vehicule="ULM Pendulaire" prix="190">Retirer du panier</button>
                </div>
            </div>

            <!-- La deuxième carte pour l'autogire -->
            <div class="card d-flex flex-row align-items-center mb-4">
                <div class="col-1 p-0 "></div>
                <div class="col-3">
                    <img src="../IMG/autogire.png" alt="Autogire" id="ULM_Autogire" class="card img">
                </div>
                <div class="col-1 p-0 "></div>
                <div class="col-7 p-3">
                    <h5 class="card-title">Baptême de l'air Autogire</h5>
                    <p class="text-muted">260,00€</p>
                    <p>Prestation : Accompagné par un instructeur diplômé, vous découvrez le vol en ULM.</p>
                    <p>Survol de la région : découvrez les paysages superbes de Moffans-et-Vacheresse, Lyoffans et Roye dans une ambiance détendue et conviviale.</p>
                    <button class="ajouter_au_panier" nom_du_vehicule="Autogire" prix="260">Ajouter au panier</button>
                    <button class="retirer_du_panier" nom_du_vehicule="Autogire" prix="260">Retirer du panier</button>
                </div>
            </div>

            <!-- La troisième carte pour le multi-axes -->
            <div class="card d-flex flex-row align-items-center mb-4">
                <div class="col-1 p-0 "></div>
                <div class="col-3 pt-3">
                    <img src="../IMG/multi-axes.png" alt="ULM Multi-axes" id="ULM_Multi-axes" class="card img">
                </div>
                <div class="col-1 p-0 "></div>
                <div class="col-7 p-3">
                    <h5 class="card-title">Baptême de l'air ULM Multi-axes</h5>
                    <p class="text-muted">380,00€</p>
                    <p>Prestation : Accompagné par un instructeur diplômé, vous découvrez le vol en ULM.</p>
                    <p>Survol de la région : découvrez les paysages superbes de Moffans-et-Vacheresse, Lyoffans et Roye dans une ambiance détendue et conviviale.</p>
                    <button class="ajouter_au_panier" nom_du_vehicule="ULM Multi-axes" prix="380">Ajouter au panier</button>
                    <button class="retirer_du_panier" nom_du_vehicule="ULM Multi-axes" prix="380">Retirer du panier</button>
                </div>
            </div>
        </div>

        <!-- La 4ème carte pour la facture -->
        <div class="col-lg-4">
            <div class="facture p-4 border rounded bg-light">
                <h5 class="card-title">Facture</h5>
                <ul id="elements_facture" class="list-unstyled mb-3"></ul>
                <p>sous_total: <span id="sous_total">0,00€</span></p>
                <p>taxee: <span id="taxe">0,00€</span></p>
                <p><strong>Total: <span id="total">0,00€</span></strong></p>
                <button class="btn btn-dark w-100 paiement" onclick="">Continuer le paiement</button>
            </div>
        </div>
    </div>
</div>

<!-- Notifications d'ajoute, de retrait et d'achat -->
<div id="notification" class="notification"></div>
<footer class="container-fluid bg-dark text-white mt-5 pt-4">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <h5>Notre entreprise</h5>
          <ul class="list-unstyled">
            <li><a href="../HTML/A_propos.html" class="text-white">À Propos</a></li>
            <li><a href="#" class="text-white">Notre Histoire</a></li>
            <li><a href="#" class="text-white">Politique de confidentialité</a></li>
            <li><a href="#" class="text-white">Conditions d'utilisation</a></li>
            <li><a href="#" class="text-white">Nous contacter</a></li>
          </ul>
        </div>
  
        <div class="col-md-3">
          <h5>Nos Services</h5>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white">Nos Formations</a></li>
            <li><a href="../HTML/Tarifs.html#ULM_Pendulaire" class="text-white">ULM Pendulaire</a></li>
            <li><a href="../HTML/Tarifs.html#ULM_Autogire" class="text-white">ULM AutoGire</a></li>
            <li><a href="../HTML/Tarifs.html#ULM_Multi-axes" class="text-white">ULM Multi-axes</a></li>
          </ul>
        </div>
  
        <div class="col-md-3">
          <h5>Communauté</h5>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white">Centre d'aide</a></li>
            <li><a href="#" class="text-white">Les risques</a></li>
            <li><a href="#" class="text-white">Forum</a></li>
            <li><a href="#" class="text-white">Notre équipe</a></li>
          </ul>
        </div>
  
        <div class="col-md-3">
          <h5>Nous suivre</h5>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white">LinkedIn</a></li>
            <li><a href="#" class="text-white">Facebook</a></li>
            <li><a href="#" class="text-white">Instagram</a></li>
            <li><a href="#" class="text-white">YouTube</a></li>
            <li><a href="#" class="text-white">Twitter</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let sous_total = 0;
    const taux_de_taxe = 0.05;
    const elements_pour_maj_facture = {};

    // Fonction pour afficher une notification
    function showNotification(message) {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.style.display = 'block'; // Affiche la notification
        notification.style.opacity = '1'; // Rend la notification visible
        
        setTimeout(() => {
            notification.style.opacity = '0'; // Fait disparaître la notification
            setTimeout(() => {
                notification.style.display = 'none'; // Masque la notification
            }, 3000); // Délai avant de masquer
        }, 3000); // La notification reste visible pendant 2 secondes
    }

    // Fonction pour ajouter un article au panier
    document.querySelectorAll('.ajouter_au_panier').forEach(button => {
        button.addEventListener('click', function() {
            const prix = parseFloat(this.getAttribute('prix'));
            const nom_vehicule = this.getAttribute('nom_du_vehicule');
            
            // Mise à jour des quantités et du sous_total
            if (elements_pour_maj_facture[nom_vehicule]) {
                elements_pour_maj_facture[nom_vehicule].quantity++;
            } else {
                elements_pour_maj_facture[nom_vehicule] = { prix, quantity: 1 };
            }
            sous_total += prix;
            updateInvoice();
            showNotification(`${nom_vehicule} a été ajouté au panier !`); // Affiche la notification
        });
    });
    // Fct pour continuer le paiement
    document.querySelectorAll('.paiement').forEach(button => {
        button.addEventListener('click', function() {
            updateInvoice();
            showNotification(`Il n'y a pas d'erreur, je n'ai juste pas fait de page de paiement :)!`); // Affiche notification
        });
    });

    // Fct pour retirer un article du panier
    document.querySelectorAll('.retirer_du_panier').forEach(button => {
        button.addEventListener('click', function() {
            const prix = parseFloat(this.getAttribute('prix'));
            const nom_vehicule = this.getAttribute('nom_du_vehicule');
            
            // Maj des quantités et du sous_total
            if (elements_pour_maj_facture[nom_vehicule] && elements_pour_maj_facture[nom_vehicule].quantity > 0) {
                elements_pour_maj_facture[nom_vehicule].quantity--;
                sous_total -= prix;
                if (elements_pour_maj_facture[nom_vehicule].quantity === 0) delete elements_pour_maj_facture[nom_vehicule];
                updateInvoice();
                showNotification(`${nom_vehicule} a été retiré du panier !`); // Affiche la notification
            }
        });
    });

    function updateInvoice() {
        const taxe = sous_total * taux_de_taxe;
        const total = sous_total + taxe;
        
        // Maj des éléments HTML pour le sous_total, la taxee et le total
        document.getElementById('sous_total').textContent = sous_total.toFixed(2) + "€";
        document.getElementById('taxe').textContent = taxe.toFixed(2) + "€";
        document.getElementById('total').textContent = total.toFixed(2) + "€";

        // Maj de la liste des articles pour la facture
        const elements_facture = document.getElementById('elements_facture');
        elements_facture.innerHTML = '';
        for (let item in elements_pour_maj_facture) {
            const listItem = document.createElement('li');
            listItem.textContent = `${item} - ${elements_pour_maj_facture[item].quantity} x ${elements_pour_maj_facture[item].prix}€`;
            elements_facture.appendChild(listItem);
        }
    }
</script>
</body>
</html>
